<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Navbar with Table</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }

    /* Navbar Styling */
    .navbar {
      background-color: #333;
      overflow: hidden;
      padding: 10px 20px;
    }

    .navbar a {
      float: left;
      color: #f2f2f2;
      text-align: center;
      padding: 12px 16px;
      text-decoration: none;
      font-size: 17px;
    }

    .navbar a:hover {
      background-color: #575757;
      color: white;
    }

    .navbar a.active {
      background-color: #04AA6D;
      color: white;
    }

    /* Table Styling */
    .table-container {
      padding: 30px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      text-align: left;
      padding: 12px;
      border: 1px solid #ddd;
    }

    th {
      background-color: #04AA6D;
      color: white;
    }

    img {
      width: 60px;
      height: auto;
      border-radius: 4px;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <div class="navbar">
    <a href="index.html">Upload</a>
    <a href="view.html" class="active">View</a>
  </div>

  <!-- View Section with Table -->
  <div id="view" class="table-container">
    <h2>Uploaded Items</h2>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>image</th>
        </tr>
      </thead>
      <tbody id="tbody">
        
        
      </tbody>
    </table>
  </div>
<script>
window.onload = async function () {
  const baseUrl = "http://localhost:8080/getall";

  try {
    const response = await fetch(baseUrl);
    const data = await response.json();

    const tbody = document.getElementById("tbody");
    tbody.innerHTML = ""; // clear previous content

    data.forEach(item => {
      const tr = document.createElement("tr");

      // ID
      const tdId = document.createElement("td");
      tdId.textContent = item.id;

      // Name
      const tdName = document.createElement("td");
      tdName.textContent = item.name;

      // Image
      const tdImage = document.createElement("td");
      const img = document.createElement("img");

      // Check if pimage is array (byte[]) or already Base64 string
      if (Array.isArray(item.pimage)) {
        // byte[] â†’ Base64
        const base64String = btoa(String.fromCharCode(...item.pimage));
        img.src = `data:image/jpeg;base64,${base64String}`;
      } else {
        // already Base64 string
        img.src = `data:image/jpeg;base64,${item.pimage}`;
      }

      img.style.width = "100px";
      img.style.height = "auto";
      tdImage.appendChild(img);

      // Add to row
      tr.appendChild(tdId);
      tr.appendChild(tdName);
      tr.appendChild(tdImage);

      // Add row to table
      tbody.appendChild(tr);
    });
  } catch (error) {
    console.error("Error loading data:", error);
  }
};
</script>

</body>
</html>
